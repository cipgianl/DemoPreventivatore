@model OrientationFeature

@{
    var nameFeature = $"{Model.FeatureID}_{Model.SectionId}";
    var options = new List<SelectListItem>();

    for (int i = 0; i < Model.Options.Length; i++)
    {
        options.Add(new SelectListItem
        {
            Value = Model.Options[i].ID.ToString(),
            Text = Model.Options[i].ValueName,
            Selected = (int)Model.Orientation == Model.Options[i].ID ? true : false
        });
    }

}

<div id=@nameFeature class="container-fluid box-feature">
    <div id="boxOF_cmbOrientation" style="min-width: 200px;" class="form-row">
        <div class="col-10 col-form-label">
            <label for="cmbOrientation">@Model.Name</label>
            <select id="cmbOrientation" asp-items="options" asp-for="@Model.Orientation" class="form-control" style="max-width: 20em;"></select>
        </div>
    </div>
</div>

<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function (event) {
        $("#cmbOrientation").off().change(function () {
            let orientation = parseInt($(this).val());

            if ($("#FINAL_FTO_1").length > 0) {
                let width = $("#txtOpenSize_Width").val();
                let height = $("#txtOpenSize_Height").val();

                if (orientation == 1)    // Verticale
                {
                    if (height <= width) {
                        let temp = width;
                        width = height;
                        height = temp;
                    }
                }
                else // Orizzontale
                {
                    if (height > width) {
                        let temp = width;
                        width = height;
                        height = temp;
                    }

                }
                $("#txtOpenSize_Width").val(height);
                $("#txtOpenSize_Height").val(width);
            }
        });

    });

    function setOrientation(orientation) {
        // Controllo se il valore ricercato nella lista esiste
        if (existOrientationValue(orientation)) {
            $("#cmbOrientation").val(orientation).change();
        }
    }

    function existOrientationValue(orientation) {
        // Controllo se il valore ricercato nella lista esiste
        let count = $("#cmbOrientation option[value=" + orientation + "]").length;
        return count > 0;
    }
</script>
